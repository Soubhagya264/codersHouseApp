version: "3.3"
services:
    mongodb:
       image: mongo:latest
       container_name: mongodb
       restart: always
       ports:
         - "27017:27017"
       volumes:
         - codersHouseApp-vol:/data/db
    backend:
      build:
        dockerfile: Dockerfile.dev
        context: ./backend/
      container_name: backend
      restart: always
      ports:
        - "5000:5000"
      env_file:
        - ./backend/.env
      volumes:
        - ./backend:/backend
        - /backend/node_modules
      depends_on:
        - mongodb 
    frontend:
      build:
        dockerfile: Dockerfile.dev
        context: ./
      container_name: codershousefrontend
      ports:
        - "3000:3000"
      env_file:
        - ./codershousefrontend/.env
      volumes:
        - ./codershousefrontend:/codershousefrontend
        - /codershousefrontend/node_modules
      environment:
        - CHOKIDAR_USEPOLLING=true
      depends_on:
        - backend         


